
var upAjaxChanged={"{{ID}}":0};$("#{{ID}}").on("change",function(g){if(upAjaxChanged["{{ID}}"]){return}upAjaxChanged["{{ID}}"]=1;g.preventDefault();var a=$("#{{ID}}p");var d=a.children("div");var g=$("#{{ID}}");var b=g.parent("div");var f=$("#{{ID}}r");var c=new FormData();c.append("{{ID}}",g[0].files[0]);$.ajax({xhr:function(){var e=new window.XMLHttpRequest();b.hide();a.css("display","inline-block");e.upload.addEventListener("progress",function(h){if(h.lengthComputable){var i=h.loaded/h.total;i=parseInt(i*100);d.width(i+"%");d.text(i+"%")}},false);return e},url:"{{URL}}",type:"POST",data:c,contentType:false,processData:false,success:function(e){a.hide();d.width(0);d.html("");if(e){f.html(e);f.css("display","inline-block");b.html("");var h=f.children("script");if(h){$.globalEval(h.html());h.remove()}}else{b.css("display","inline-block")}},error:function(i){a.hide();var h="Une erreur est survenue";if(i.status==404){h="Err: connexion trop lente ou coup√©e"}f.html('<div class="text-danger">'+h+"</div>")}})});